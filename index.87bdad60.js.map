{"mappings":"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","sources":["src/js/index.js"],"sourcesContent":["const refs = {\n  body: document.querySelector('body'),\n  searchForm: document.querySelector('.search-form'),\n  searchInput: document.querySelector('.search-form input'),\n  searchButton: document.querySelector('.search-form button'),\n  galleryWrapper: document.querySelector('.gallery'),\n  loadMoreButton: document.querySelector('.load-more'),\n};\n\nrefs.body.style.fontFamily = 'Calibri, sans-serif';\nrefs.body.style.fontSize = '12px';\nrefs.body.style.margin = '0';\nrefs.body.style.paddingTop = '60px';\nrefs.body.style.backgroundColor = '#EAF1FA';\nrefs.searchForm.style.display = 'flex';\nrefs.searchForm.style.justifyContent = 'center';\nrefs.searchForm.style.position = 'fixed';\nrefs.searchForm.style.top = '0px';\nrefs.searchForm.style.left = '0px';\nrefs.searchForm.style.right = '0px';\nrefs.searchForm.style.padding = '10px 0';\n\nrefs.searchForm.style.backgroundColor = '#73A0DB';\n\nrefs.searchInput.style.padding = '10px 5px';\nrefs.searchInput.style.border = '1px solid #255391';\nrefs.searchInput.style.borderRadius = '5px';\n\nrefs.searchButton.style.padding = '10px 15px';\nrefs.searchButton.style.backgroundColor = '#255391';\nrefs.searchButton.style.color = '#ffffff';\nrefs.searchButton.style.border = '1px solid #ffffff';\nrefs.searchButton.style.borderRadius = '5px';\nrefs.galleryWrapper.style.display = 'flex';\nrefs.galleryWrapper.style.alignContent = 'center';\nrefs.galleryWrapper.style.flexWrap = 'wrap';\nrefs.galleryWrapper.style.gap = '10px';\nrefs.galleryWrapper.style.padding = '0 5px 10px';\nrefs.loadMoreButton.style.display = 'block';\nrefs.loadMoreButton.style.margin = '0 auto 10px';\nrefs.loadMoreButton.style.padding = '10px 15px';\nrefs.loadMoreButton.style.backgroundColor = '#255391';\nrefs.loadMoreButton.style.color = '#ffffff';\nrefs.loadMoreButton.style.border = '1px solid #255391';\nrefs.loadMoreButton.style.borderRadius = '5px';\n//\n\nfunction hideButton() {\n  refs.loadMoreButton.style.visibility = 'hidden';\n}\n\nfunction showButton() {\n  refs.loadMoreButton.style.visibility = 'visible';\n}\n\nconst URL = 'https://pixabay.com/api';\nconst API_KEY = 'key=40252258-b27561441daedadb4fc814a5c';\nconst search = {\n  query: null,\n  type: 'photo',\n  orientation: 'horizontal',\n  page: 1,\n  onPage: 40,\n  safe: true,\n};\n\nlet searchMatches = 0;\n\nfunction fetchPictures() {\n  fetch(\n    `${URL}/?${API_KEY}&q=${search.query}&image_type=${search.type}&orientation=${search.orientation}&safesearch=${search.safe}&page=${search.page}&per_page=${search.onPage}`\n  )\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(`Request failed with status ${response.status}`);\n      }\n      return response.json();\n    })\n    .then(pictures => {\n      if (pictures.hits.length > 0) {\n        if (search.page === 1) {\n          console.log(`Hooray! We found ${pictures.totalHits} images`);\n          console.log(`page number ${search.page} is loaded`);\n        }\n        renderImageCard(pictures);\n        searchMatches += pictures.hits.length;\n        console.log(\n          `${searchMatches} photos are delivered out of ${pictures.totalHits} allowed per one query.`\n        );\n        if (searchMatches < pictures.totalHits) {\n          setTimeout(showButton, 1500);\n        } else {\n          hideButton();\n          console.log(\n            \"We're sorry, but you've reached the end of search results.\"\n          );\n          refs.searchForm.reset();\n        }\n      } else {\n        console.log('no pictures found!');\n        hideButton();\n        refs.searchForm.reset();\n      }\n    })\n    .catch(error => {\n      if (error.message === 'Request failed with status 400') {\n        console.log(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n        hideButton();\n        refs.searchForm.reset();\n      } else if (error.message === 'Failed to fetch') {\n        console.log(\n          'Internet connection is lost. Please try again as soon as your connection is restored'\n        );\n      } else {\n        console.error('An error occurred: ', error.message);\n        hideButton();\n        refs.searchForm.reset();\n      }\n    });\n}\n\nfunction renderImageCard(pictures) {\n  pictures.hits.forEach(hit =>\n    refs.galleryWrapper.insertAdjacentHTML('beforeend', markupImageCard(hit))\n  );\n  const imageCards = Array.from(refs.galleryWrapper.children);\n  const columnNumber = 4;\n  imageCards.forEach(card => {\n    card.style.width = `calc((100% - ${\n      columnNumber - 1\n    } * 10px) / ${columnNumber})`;\n    card.style.display = 'flex';\n    card.style.flexDirection = 'column';\n    card.style.justifyContent = 'flex-end';\n    card.style.boxShadow =\n      '0px 2px 1px 0px rgba(46, 47, 66, 0.08),0px 1px 1px 0px rgba(46, 47, 66, 0.16),0px 1px 6px 0px rgba(46, 47, 66, 0.08)';\n    card.style.borderRadius = '0 0 5px 5px';\n    const infoContainer = card.querySelector('.info');\n    const infoItems = card.querySelectorAll('.info-item');\n    // console.log(infoItems);\n    infoContainer.style.display = 'flex';\n    infoContainer.style.justifyContent = 'space-around';\n    infoContainer.style.padding = '10px';\n    infoItems.forEach(item => {\n      item.style.display = 'flex';\n      item.style.flexDirection = 'column';\n      item.style.alignItems = 'center';\n    });\n  });\n}\n\nfunction markupImageCard(element) {\n  return `<div class=\"photo-card\">\n        <img src=\"${element['webformatURL']}\" alt=\"${element['tags']}\" width=\"100%\" loading=\"lazy\" />\n        <div class=\"info\">\n            <p class=\"info-item\">\n                <b>Likes</b>${element['likes']}\n            </p>\n            <p class=\"info-item\">\n                <b>Views</b>${element['views']}\n            </p>\n            <p class=\"info-item\">\n                <b>Comments</b>${element['comments']}\n            </p>\n            <p class=\"info-item\">\n                <b>Downloads</b>${element['downloads']}\n            </p>\n        </div>\n    </div>`;\n}\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  if (search.query !== refs.searchInput.value) {\n    hideButton();\n    refs.galleryWrapper.innerHTML = '';\n    search.query = refs.searchInput.value;\n    if (search.query.trim() !== '') {\n      search.page = 1;\n      searchMatches = 0;\n      fetchPictures();\n    } else {\n      console.log('Please fill in search field!');\n    }\n  }\n}\n\nfunction loadMore() {\n  search.page += 1;\n  console.log(`page number ${search.page} is loaded`);\n  fetchPictures();\n}\n\nrefs.searchForm.addEventListener('submit', handleSubmit);\nrefs.loadMoreButton.addEventListener('click', loadMore);\n\nhideButton();"],"names":["$44ae6d9db4eaca0f$var$refs","body","document","querySelector","searchForm","searchInput","searchButton","galleryWrapper","loadMoreButton","$44ae6d9db4eaca0f$var$hideButton","style","visibility","$44ae6d9db4eaca0f$var$showButton","fontFamily","fontSize","margin","paddingTop","backgroundColor","display","justifyContent","position","top","left","right","padding","border","borderRadius","color","alignContent","flexWrap","gap","$44ae6d9db4eaca0f$var$search","query","type","orientation","page","onPage","safe","$44ae6d9db4eaca0f$var$searchMatches","$44ae6d9db4eaca0f$var$fetchPictures","fetch","concat","then","response","ok","Error","status","json","pictures","hits","length","console","log","totalHits","forEach","hit","insertAdjacentHTML","element","imageCards","Array","from","children","columnNumber","card","width","flexDirection","boxShadow","infoContainer","infoItems","querySelectorAll","item","alignItems","$44ae6d9db4eaca0f$var$renderImageCard","setTimeout","reset","catch","error","message","addEventListener","event","preventDefault","value","innerHTML","trim"],"version":3,"file":"index.87bdad60.js.map"}