{"mappings":"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","sources":["src/js/index.js"],"sourcesContent":["const refs = {\n  body: document.querySelector('body'),\n  searchForm: document.querySelector('.search-form'),\n  searchInput: document.querySelector('.search-form input'),\n  searchButton: document.querySelector('.search-form button'),\n  galleryWrapper: document.querySelector('.gallery'),\n  loadMoreButton: document.querySelector('.load-more'),\n};\n\nrefs.body.style.fontFamily = 'Calibri, sans-serif';\nrefs.body.style.fontSize = '12px';\nrefs.body.style.margin = '0';\nrefs.body.style.paddingTop = '60px';\nrefs.body.style.backgroundColor = '#EAF1FA';\nrefs.searchForm.style.display = 'flex';\nrefs.searchForm.style.justifyContent = 'center';\nrefs.searchForm.style.position = 'fixed';\nrefs.searchForm.style.top = '0px';\nrefs.searchForm.style.left = '0px';\nrefs.searchForm.style.right = '0px';\nrefs.searchForm.style.padding = '10px 0';\n\nrefs.searchForm.style.backgroundColor = '#73A0DB';\n\nrefs.searchInput.style.padding = '10px 5px';\nrefs.searchInput.style.border = '1px solid #255391';\nrefs.searchInput.style.borderRadius = '5px';\n\nrefs.searchButton.style.padding = '10px 15px';\nrefs.searchButton.style.backgroundColor = '#255391';\nrefs.searchButton.style.color = '#ffffff';\nrefs.searchButton.style.border = '1px solid #ffffff';\nrefs.searchButton.style.borderRadius = '5px';\nrefs.galleryWrapper.style.display = 'flex';\nrefs.galleryWrapper.style.alignContent = 'center';\nrefs.galleryWrapper.style.flexWrap = 'wrap';\nrefs.galleryWrapper.style.gap = '10px';\nrefs.galleryWrapper.style.padding = '0 5px 10px';\nrefs.loadMoreButton.style.display = 'block';\nrefs.loadMoreButton.style.margin = '0 auto 10px';\nrefs.loadMoreButton.style.padding = '10px 15px';\nrefs.loadMoreButton.style.backgroundColor = '#255391';\nrefs.loadMoreButton.style.color = '#ffffff';\nrefs.loadMoreButton.style.border = '1px solid #255391';\nrefs.loadMoreButton.style.borderRadius = '5px';\n//\n\nfunction hideButton() {\n  refs.loadMoreButton.style.visibility = 'hidden';\n}\n\nfunction showButton() {\n  refs.loadMoreButton.style.visibility = 'visible';\n}\n\nconst URL = 'https://pixabay.com/api';\nconst API_KEY = 'key=40252258-b27561441daedadb4fc814a5c';\nconst search = {\n  query: null,\n  type: 'photo',\n  orientation: 'horizontal',\n  page: 1,\n  onPage: 40,\n  safe: true,\n};\n\nlet searchMatches = 0;\n\nfunction fetchPictures() {\n  fetch(\n    `${URL}/?${API_KEY}&q=${search.query}&image_type=${search.type}&orientation=${search.orientation}&safesearch=${search.safe}&page=${search.page}&per_page=${search.onPage}`\n  )\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(`Request failed with status ${response.status}`);\n      }\n      return response.json();\n    })\n    .then(pictures => {\n      if (pictures.hits.length > 0) {\n        if (search.page === 1) {\n          console.log(`Hooray! We found ${pictures.totalHits} images`);\n          console.log(`page number ${search.page} is loaded`);\n        }\n        renderImageCard(pictures);\n        searchMatches += pictures.hits.length;\n        console.log(\n          `${searchMatches} photos are delivered out of ${pictures.totalHits} allowed per one query.`\n        );\n        if (searchMatches < pictures.totalHits) {\n          setTimeout(showButton, 1500);\n        } else {\n          hideButton();\n          console.log(\n            \"We're sorry, but you've reached the end of search results.\"\n          );\n          refs.searchForm.reset();\n        }\n      } else {\n        console.log('no pictures found!');\n        hideButton();\n        refs.searchForm.reset();\n      }\n    })\n    .catch(error => {\n      if (error.message === 'Request failed with status 400') {\n        console.log(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n        hideButton();\n        refs.searchForm.reset();\n      } else if (error.message === 'Failed to fetch') {\n        console.log(\n          'Internet connection is lost. Please try again as soon as your connection is restored'\n        );\n      } else {\n        console.error('An error occurred: ', error.message);\n        hideButton();\n        refs.searchForm.reset();\n      }\n    });\n}\n\nfunction renderImageCard(pictures) {\n  pictures.hits.forEach(hit =>\n    refs.galleryWrapper.insertAdjacentHTML('beforeend', markupImageCard(hit))\n  );\n  const imageCards = Array.from(refs.galleryWrapper.children);\n  const columnNumber = 4;\n  imageCards.forEach(card => {\n    card.style.width = `calc((100% - ${\n      columnNumber - 1\n    } * 10px) / ${columnNumber})`;\n    card.style.display = 'flex';\n    card.style.flexDirection = 'column';\n    card.style.justifyContent = 'flex-end';\n    card.style.boxShadow =\n      '0px 2px 1px 0px rgba(46, 47, 66, 0.08),0px 1px 1px 0px rgba(46, 47, 66, 0.16),0px 1px 6px 0px rgba(46, 47, 66, 0.08)';\n    card.style.borderRadius = '0 0 5px 5px';\n    const infoContainer = card.querySelector('.info');\n    const infoItems = card.querySelectorAll('.info-item');\n    // console.log(infoItems);\n    infoContainer.style.display = 'flex';\n    infoContainer.style.justifyContent = 'space-around';\n    infoContainer.style.padding = '10px';\n    infoItems.forEach(item => {\n      item.style.display = 'flex';\n      item.style.flexDirection = 'column';\n      item.style.alignItems = 'center';\n    });\n  });\n}\n\nfunction markupImageCard(element) {\n  return `<div class=\"photo-card\">\n        <img src=\"${element['webformatURL']}\" alt=\"${element['tags']}\" width=\"100%\" loading=\"lazy\" />\n        <div class=\"info\">\n            <p class=\"info-item\">\n                <b>Likes</b>${element['likes']}\n            </p>\n            <p class=\"info-item\">\n                <b>Views</b>${element['views']}\n            </p>\n            <p class=\"info-item\">\n                <b>Comments</b>${element['comments']}\n            </p>\n            <p class=\"info-item\">\n                <b>Downloads</b>${element['downloads']}\n            </p>\n        </div>\n    </div>`;\n}\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  if (search.query !== refs.searchInput.value) {\n    hideButton();\n    refs.galleryWrapper.innerHTML = '';\n    search.query = refs.searchInput.value;\n    if (search.query.trim() !== '') {\n      search.page = 1;\n      searchMatches = 0;\n      fetchPictures();\n    } else {\n      console.log('Please fill in search field!');\n    }\n  }\n}\n\nfunction loadMore() {\n  search.page += 1;\n  console.log(`page number ${search.page} is loaded`);\n  fetchPictures();\n}\n\nrefs.searchForm.addEventListener('submit', handleSubmit);\nrefs.loadMoreButton.addEventListener('click', loadMore);\n\nhideButton();"],"names":["$85a5f86b715fe7db$var$refs","body","document","querySelector","searchForm","searchInput","searchButton","galleryWrapper","loadMoreButton","$85a5f86b715fe7db$var$hideButton","style","visibility","$85a5f86b715fe7db$var$showButton","fontFamily","fontSize","margin","paddingTop","backgroundColor","display","justifyContent","position","top","left","right","padding","border","borderRadius","color","alignContent","flexWrap","gap","$85a5f86b715fe7db$var$search","query","type","orientation","page","onPage","safe","$85a5f86b715fe7db$var$searchMatches","$85a5f86b715fe7db$var$fetchPictures","fetch","then","response","ok","Error","status","json","pictures","hits","length","console","log","totalHits","forEach","hit","insertAdjacentHTML","element","imageCards","Array","from","children","columnNumber","card","width","flexDirection","boxShadow","infoContainer","infoItems","querySelectorAll","item","alignItems","$85a5f86b715fe7db$var$renderImageCard","setTimeout","reset","catch","error","message","addEventListener","event","preventDefault","value","innerHTML","trim"],"version":3,"file":"index.f83a7f68.js.map"}